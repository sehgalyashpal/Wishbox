<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Greeting Card</title><link rel="icon" href="images/pngLotus.png" type="image/x-icon">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

*{
  box-sizing:border-box;
}
html, body{
  width:100%;
  overflow-x:hidden;
}

body{
  font-family: Arial, sans-serif;
  background: url("images/imgBG.webp") no-repeat center/cover;
  color:#fff;
   text-shadow: 2px 2px 1px black;
  text-align:center;
  margin:0;
  padding:10px;
}

form{
  background:#111;
  padding:15px;
  max-width:400px;
  width:100%;
  margin:auto;
  border-radius:10px;
}

input, textarea, select{
  width:100%;
  max-width:100%;
  padding:10px;
  margin:8px 0;
  border:none;
  border-radius:5px;
  box-sizing:border-box;
}

button{
  padding:10px 20px;
  background:#ff9800;
  border:none;
  border-radius:5px;
  cursor:pointer;
  font-size:16px;
  margin:5px;
}

/* CARD */
#card{
  margin:16px auto;
  width:100%;
  max-width:360px;        /* Perfect for mobile screens */
  min-height:260px;       /* Enough space without looking empty */
  border-radius:16px;     /* Smooth, modern corners */
  padding:18px;           /* Balanced inner spacing */
  box-sizing:border-box;
  background:linear-gradient(135deg,#FFFF00,#ff0000);
  position:relative;
/*box-shadow:
  0 0 1px rgba(255, 183, 77, 0.4),
  0 0 1px rgba(244, 143, 177, 0.3),
  0 0 1px rgba(255, 112, 67, 0.3);*/
    
}

#card h1{margin:5px 0;font-size:28px;} 
#card p{margin:5px 0;}

/* FOOTER WITH QR */
.card-footer{
  position:absolute;
  bottom:8px;
  left:0;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  font-size:15px;
}

.qr-img{
  width:70px;
  height:70px;
  background:#fff;
  padding:1px;
  border-radius:1px;
}

.footer-text{
  line-height:1.2;
}


.success-msg{
  margin-top:15px;
  color:#00ff99;
  font-size:18px;
  animation: pop 0.6s ease;
}

@keyframes pop{
  0%{transform:scale(0.7);opacity:0;}
  100%{transform:scale(1);opacity:1;}
}

@media (max-width:480px){
  h2{font-size:20px;}
  #card h1{font-size:22px;}
  #card p{font-size:14px;}
}
</style>
</head>

<body>

<h2 style="color:#ff0000; white-space:nowrap;">üéÜ Create Your Greeting Card üéÜ</h2>

<!-- formspree FORM -->
  <form id="cardForm"
  action="https://formspree.io/f/xjgkkedn"
  method="POST">


  <input id="to" name="to" placeholder="To (Name)" required>

  <textarea id="msg" name="message"
            placeholder="Your Message" required></textarea>

  <input id="from" name="from" placeholder="From (Your Name)" required>

  <select id="bg" name="background">
    <option value="Flower">üå∏ Send Flowers</option>
    <option value="Sweet">üç¨ Send Sweets</option>
    <option value="Cracker">üéá Send Crackers</option>
    <option value="Chocolate">üç´ Send Chocolates</option>
  </select>

   <!-- REQUIRED FOR formspree -->
  <input type="hidden" name="subject" value="Greeting Card">

<!--geolocation -->
  <input type="hidden" name="latitude" id="latitude">
    <input type="hidden" name="longitude" id="longitude">

<!--geolocation - end-->

<button type="button" onclick="updateCard()">Preview Card</button>


<!--<input id="rd" type="hidden" name="_redirect" value="https://wishboxgreetings.netlify.app"> -->


</form>

<!-- GREETING CARD -->
<div id="card">
  <h1> üéâ Best Wishes üéâ</h1>
  <p id="cardTo"><b>Hello Dear</b></p>
  <p id="cardMsg"><b>Best Wishes and Greetings!</b></p>
  <p id="cardFrom"><b>‚Äì From Me</b></p>

  <!-- FOOTER WITH QR INSTRUCTION -->
  <div class="card-footer">
    <img class="qr-img" src="images/qr-code.svg" >
    <div class="footer-text">
      Scan QR to create<br>
      your own Greeting card
    </div>
  </div>
</div>

<!--chat gpt suggest-->
<div id="successMsg" class="success-msg" style="display:none;">
  ‚úÖ Card downloaded & sent successfully!
</div>

<button onclick="downloadCard()">Download Card</button>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<script>
function updateCard(){

  // validation
  if(
    to.value.trim() === "" ||
    msg.value.trim() === "" ||
    from.value.trim() === ""
  ){
    alert("Please fill To, Message, and From before previewing the card.");
    return; // ‚õî stop preview
  }

  // update card text
  cardTo.innerText = "Dear " + to.value;
  cardMsg.innerText = msg.value;
  cardFrom.innerText = "‚Äì " + from.value;

  // background selection
  if(bg.value === "Flower")
    card.style.background = "url('images/Flower.webp') no-repeat center/cover";

  if(bg.value === "Sweet")
    card.style.background = "url('images/Sweet.webp') no-repeat center/cover";

  if(bg.value === "Cracker")
    card.style.background = "url('images/Cracker.webp') no-repeat center/cover";

  if(bg.value === "Chocolate")
    card.style.background = "url('images/Chocolate.webp') no-repeat center/cover";  

// GEOLOCATION - START

  // Check if browser supports Geolocation
    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(
        function(position) {
          // Fill hidden form fields
          document.getElementById("latitude").value = position.coords.latitude;
          document.getElementById("longitude").value = position.coords.longitude;
        },
        function(error) {
          console.error("Error getting location:", error.message);
// alert("Allow Location.");
        },
        { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
      );
    } else {
      alert("Geolocation is not supported by your browser.");
    }
// GEOLOCATION - END

}
function downloadCard(){
  html2canvas(card).then(canvas=>{
    let link = document.createElement("a");
    link.download = "Wishes_n_Greetings.jpg";
    link.href = canvas.toDataURL("image/jpeg");
    link.click();

    // ‚úÖ SEND DATA TO FORMSPREE

// document.getElementById("rd").value ="https://wishboxgreetings.netlify.app";

//chat gpt suggest
document.getElementById("successMsg").style.display = "block";

    document.getElementById("cardForm").submit();
    
  });
}




</script>

</body>
</html>